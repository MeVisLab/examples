<!doctype html><html><head><title>Example 2.5.2: Module interactions via Python scripting</title><meta charset=utf-8><meta name="MeVisLab Documentation" content="Welcome to MeVisLab Documentation."><meta name=dc.relation content="https://mevislab.github.io/examples/"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#1A94D2"><base href=https://mevislab.github.io/examples/><link rel=stylesheet href=https://mevislab.github.io/examples/css/styles.min.css media=screen><link rel='shortcut icon' type=image/x-icon href=https://mevislab.github.io/examples/favicon.ico><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/googlecode.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/languages/stan.min.js></script>
<script src=https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js></script>
<link rel=stylesheet href=https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css><script>document.addEventListener("DOMContentLoaded",e=>{document.querySelectorAll("pre code").forEach(e=>{hljs.highlightElement(e)})}),hljs.configure({ignoreUnescapedHTML:!0})</script></head><body><div id=carousel class="carousel slide carousel-fade" data-bs-ride=carousel><div class=carousel-indicators><button type=button data-bs-target=#carouselExampleIndicators data-bs-slide-to=0 class=active aria-current=true aria-label="Slide 1"></button>
<button type=button data-bs-target=#carouselExampleIndicators data-bs-slide-to=1 aria-label="Slide 2"></button>
<button type=button data-bs-target=#carouselExampleIndicators data-bs-slide-to=2 aria-label="Slide 3"></button></div><div class="carousel-inner text-center"><div class="carousel-item active"><img src=https://mevislab.github.io/examples/images/Banner.png class=img-fluid alt="MeVisLab Documentation"></div><div class=carousel-item><img src=https://mevislab.github.io/examples/images/Banner2.png class=img-fluid alt="MeVisLab Documentation"></div><div class=carousel-item><img src=https://mevislab.github.io/examples/images/Banner3.png class=img-fluid alt="MeVisLab Documentation"></div></div></div><div class="my-header-menu d-flex justify-content-center"><nav class="navbar navbar-dark navbar-expand-lg"><div class=container-fluid><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNavAltMarkup aria-controls=navbarNavAltMarkup aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNavAltMarkup><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://mevislab.github.io/examples/>Home</a></li><li class=nav-item><a class=nav-link href=https://mevislab.github.io/examples/about/>About</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle active" href=# id=navbarDropdownMenuLink role=button data-bs-toggle=dropdown aria-expanded=false>Tutorials</a><ul class=dropdown-menu><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/introduction/>Introduction</a></li><li><a class="dropdown-item active" href=https://mevislab.github.io/examples/tutorials/basicmechanisms/>Chapter I: Basic Mechanisms of MeVisLab &#187;</a><ul class="dropdown-menu dropdown-submenu"><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/basicmechanisms/dataimport/>Example 1: Data import in MeVisLab</a></li><li><a class="dropdown-item active" href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/>Example 2: Macro Modules and Module Interaction &#187;</a><ul class="dropdown-menu dropdown-submenu"><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/package/>Example 2.1: Package Creation</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/globalmacromodules/>Example 2.2: Creation of Global Macro Modules</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/helpfiles/>Example 2.3: Creation of module help</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/guidesign/>Example 2.4: GUI development</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/pythonscripting/>Example 2.5: Interactions via Python scripting</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/scriptingexample1/>Example 2.5.1: The module RunPythonScript</a></li><li><a class="dropdown-item active" href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/scriptingexample2/>Example 2.5.2: Module interactions via Python scripting</a></li></ul></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/basicmechanisms/macromodules/viewerexample/>Example 3: Creating a simple application</a></li></ul></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/openinventor/>Chapter II: Open Inventor &#187;</a><ul class="dropdown-menu dropdown-submenu"><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/openinventor/openinventorobjects/>Example 1: Open Inventor Objects</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/openinventor/mouseinteractions/>Example 2: Mouse interactions in Open Inventor</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/openinventor/camerainteraction/>Example 3: Camera Interactions in Open Inventor</a></li></ul></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/visualization/>Chapter III: Visualization &#187;</a><ul class="dropdown-menu dropdown-submenu"><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/visualization/visualizationexample1/>Example 1: Synchronous view of two images</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/visualization/visualizationexample2/>Example 2: Creating a magnifier</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/visualization/visualizationexample3/>Example 3: Image Overlays</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/visualization/visualizationexample4/>Example 4: Display 2D images in Open Inventor SoRenderArea</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/visualization/visualizationexample5/>Example 5: Volume rendering and interactions</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/visualization/visualizationexample6/>Example 6: MeVisLab PathTracer</a></li></ul></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/image_processing/>Chapter IV: Image Processing</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/>Chapter V: Data Objects &#187;</a><ul class="dropdown-menu dropdown-submenu"><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/contourobjects/>Contour Objects (CSO) &#187;</a><ul class="dropdown-menu dropdown-submenu"><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/contours/contourexample1/>Contour Example 1: Creation of Contours</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/contours/contourexample2/>Contour Example 2: Contour Interpolation</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/contours/contourexample3/>Contour Example 3: 2D and 3D Visualization of Contours</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/contours/contourexample4/>Contour Example 4: Annotation of Images</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/contours/contourexample5/>Contour Example 5: Contours and Ghosting</a></li></ul></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/surfaceobjects/>Surface Objects (WEM) &#187;</a><ul class="dropdown-menu dropdown-submenu"><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/surfaces/surfaceexample1/>Surface Example 1: Creation of WEMs</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/surfaces/surfaceexample2/>Surface Example 2: Processing and Modification of WEM</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/surfaces/surfaceexample3/>Surface Example 3: Interactions with WEM</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/surfaces/surfaceexample4/>Surface Example 4: Interactively moving WEM</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/surfaces/surfaceexample5/>Surface Example 5: WEM - Primitive Value Lists</a></li></ul></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/markerobjects/>Marker Objects &#187;</a><ul class="dropdown-menu dropdown-submenu"><li><a class=dropdown-item href=https://mevislab.github.io/examples/tutorials/dataobjects/markers/markerexample1/>Example 1: Distance between Markers</a></li></ul></li></ul></li></ul></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-bs-toggle=dropdown aria-expanded=false>Examples</a><ul class=dropdown-menu><li><a class=dropdown-item href=https://mevislab.github.io/examples/examples/basic_mechanisms/>Basic Mechanisms</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/examples/open_inventor/>Open Inventor</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/examples/data_objects/>Data Objects</a></li><li><a class=dropdown-item href=https://mevislab.github.io/examples/examples/visualization/>Visualization Examples</a></li></ul></li><li class=nav-item><a class=nav-link href=https://mevislab.github.io/examples/contact/>Contact</a></li></ul><form class="d-flex px-4" id=custom-search name=custom-search method=post><input id=custom-search-field name=search title="Search String" class="form-control me-2" type=search placeholder=Search aria-label=Search>
<button id=search_submit class="btn btn-outline-light" type=submit>Search</button></form></div></div><div class=autocomplete-dropdown-container id=custom-search-results data-popper-placement=bottom style="width:100px;position:absolute;inset:0 0 auto 0;margin-left:4px;transform:translate3d(400px,60px,0)"><div class="dropdown-menu dropdown-submenu"></div></div><script>let button=document.getElementById("search_submit");button.onclick=function(e){e.preventDefault();var t=document.getElementById("custom-search-field").value,n="https://mevislab.github.io/examples//search?query="+encodeURIComponent(t);location.href=n};let params={json_src:"https://mevislab.github.io/examples//index.json",minlength:3,defaultsearch:"AND",sort_date:"DESC",autocomplete:1,section_search:0,badwords:"and,or,but,if,when,the,a,an,one",json_wait:"<p><em>Searching...</em></p>",json_ready:"",extern_icon:" (external Link)",err_badstring:"",err_noresult:"<p><em>NO RESULTS</em></p>",err_norequest:"",err_filefailed:'<p style="text-align: center;color: red;">Error.</p>',res_one_item:"<p><em>[CNT] RESULT</em></p>",res_more_items:"<p><em>[CNT] RESULTS</em></p>",res_out_top:'<ul class="dropdown-menu show">',res_out_bottom:"</ul>",res_item_tpl:'<a class="dropdown-item" href="[URL]">[TITLE]</a>',add_searchlink:"<p></p>"},section_trans={post:"Blog"},searchfield_weight={title:5,tags:5,summary:2,content:1}</script><script type=text/javascript src=https://mevislab.github.io/examples/js/search.js></script></nav></div><div id=content class="height-100 bg-none"><div class="container pb-5 pt-3"><div class="container-fluid overflow-hidden"><div class="row vh-auto overflow-auto"><div class="col d-flex flwx-column h-sm-auto"><div class="col px-6"><a href=# title=Advanced><span class="badge bg-warning">Advanced</span></a>
<a href=# title=Tutorial><span class="badge bg-secondary">Tutorial</span></a>
<a href=# title=Macro><span class="badge bg-secondary">Macro</span></a>
<a href=# title="Macro Modules"><span class="badge bg-secondary">Macro Modules</span></a>
<a href=# title="Global Macro"><span class="badge bg-secondary">Global Macro</span></a>
<a href=# title=Python><span class="badge bg-secondary">Python</span></a>
<a href=# title=Scripting><span class="badge bg-secondary">Scripting</span></a><h1 id=example-252-module-interactions-via-python-scripting>Example 2.5.2: Module interactions via Python scripting</h1><h2 id=introduction>Introduction</h2><p>In this example, you will learn how to add Python scripting to your User Interface. The network used in <a href=tutorials/dataobjects/contours/contourexample5/>Chapter V</a> will be used for creating the Macro Module.</p><h2 id=steps-to-do>Steps to do</h2><h3 id=creating-the-macro-module>Creating the macro module</h3><p>First, we condense the example network into a macro module and then we create a panel for that module. To create a macro module use the
Project Wizard, which you find under <i>[
File
&rarr;
Run Project Wizard
]</i>. Select
<em>Macro Module</em> and press <em>Run</em>.</p><p>Now, you have to edit:</p><ol><li>Name: The name of your module</li><li>Package: Select the package you like to save the macro module in.</li><li>Directory Structure: Change to <em>Self-contained</em></li><li>Project: Select you project name</li></ol><p>Press <em>Next</em> and edit the following:</p><ol><li>Copy existing network: Select the example network</li><li>Check the box: Add Python file</li></ol><p>Now, create your macro module and reload MeVisLab. You can find your module via search in MeVisLab.</p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/CreatingMacroModule.png title="Creating macro module"><img id="Creating macro module" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/CreatingMacroModule.png alt="Creating macro module" title="Creating macro module"></a><figcaption class=figure-caption>Creating macro module</figcaption></p></p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/EnablePythonScripting.png title="Enable Python scripting"><img id="Enable Python scripting" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/EnablePythonScripting.png alt="Enable Python scripting" title="Enable Python scripting"></a><figcaption class=figure-caption>Enable Python scripting</figcaption></p></p><p>To design a panel and create a user interface for the macro module, open the <em>.script</em> file. You can see, that a Command environment exist, which defines the python file as source for all commands.</p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/OpenScriptFile.png title="Open the script file"><img id="Open the script file" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/OpenScriptFile.png alt="Open the script file" title="Open the script file"></a><figcaption class=figure-caption>Open the script file</figcaption></p></p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/ScriptFile.png title="Script file"><img id="Script file" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/ScriptFile.png alt="Script file" title="Script file"></a><figcaption class=figure-caption>Script file</figcaption></p></p><h3 id=creating-a-panel-with-tabs-and-viewers>Creating a panel with tabs and viewers</h3><p>At first, we create a
<a href=https://mevislabdownloads.mevis.de/docs/current/MeVisLab/Resources/Documentation/Publish/SDK/MDLReference/index.html#mdl_Window target=_blank>Window</a>
with two
<a href=https://mevislabdownloads.mevis.de/docs/current/MeVisLab/Resources/Documentation/Publish/SDK/MDLReference/index.html##mdl_TabView target=_blank>Tabs</a>
. One <em>Main</em> tab, in which both viewers of the network are represented and one tab for <em>Settings</em>. For generating tabs, we can use the control
<a href=https://mevislabdownloads.mevis.de/docs/current/MeVisLab/Resources/Documentation/Publish/SDK/MDLReference/index.html#mdl_TabView target=_blank>TabView</a>
, with its items
<a href=https://mevislabdownloads.mevis.de/docs/current/MeVisLab/Resources/Documentation/Publish/SDK/MDLReference/index.html#mdl_TabViewItem target=_blank>TabViewItem</a>
. The control <em>TabView</em> enables to add a command, which is executed when opening the tab. For adding the viewers to the panel, we use the Control <em>Viewer</em>.</p><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.script</p></div><div class=card-body><pre tabindex=0><code class=language-Stan data-lang=Stan>Window {
    TabView {
        TabViewItem Main {
            Horizontal {
                Viewer View2D.self {
                    type = SoRenderArea
                    pw = 400
                    ph = 400
                }
                Viewer SoExaminerViewer.self {
                    type = SoExaminerViewer
                    pw = 400
                    ph = 400
                }
            }
        }
        
        TabViewItem Settings {
        }
    }
}
</code></pre></div></div><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/PanelWithTabsAndViewers.png title="Panel with Tabs and Viewers"><img id="Panel with Tabs and Viewers" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/PanelWithTabsAndViewers.png alt="Panel with Tabs and Viewers" title="Panel with Tabs and Viewers"></a><figcaption class=figure-caption>Panel with Tabs and Viewers</figcaption></p></p><h3 id=edit-viewer-settings-in-the-panel>Edit viewer settings in the panel</h3><p>You may want to change the design setting of the right viewer. This is
still possible via the internal network of the macro module. Open the
internal network either via the context menu or using the middle mouse
button
<img width=22px src=https://mevislab.github.io/examples/images/mmb.svg alt="Middle Mouse Button / Mouse Wheel">
and click on the module. After that, open the Automatic Panel of
the module <code>SoExaminerViewer</code> via context menu <i>[
Show Windows
&rarr;
Automatic Panel
]</i> and change the field <em>decoration</em> to <em>False</em>. Keep in mind, as we did not create CSOs by now, the right viewer stays black.</p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/ChangeViewerSettings.png title="Change viewer settings"><img id="Change viewer settings" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/ChangeViewerSettings.png alt="Change viewer settings" title="Change viewer settings"></a><figcaption class=figure-caption>Change viewer settings</figcaption></p></p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/ChangedViewerSettings.png title="Changed viewer settings"><img id="Changed viewer settings" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/ChangedViewerSettings.png alt="Changed viewer settings" title="Changed viewer settings"></a><figcaption class=figure-caption>Changed viewer settings</figcaption></p></p><h3 id=selection-of-images>Selection of images</h3><p>Next, we like to add the option to browse through the folders and select
the image, we like to create CSOs from. This functionality is already given in the internal network in the module <code>LocalImage</code>. We can copy this functionality from <code>LocalImage</code> and add this option to the panel above both viewers. But, how should we know, which field name we
reference to? To find this out, open the
internal network of your macro module. Now you are able to open the panel of
the module <code>LocalImage</code>. Right-click
<img width=22px src=https://mevislab.github.io/examples/images/rmb.svg alt="Right Mouse Button">
the desired field: In this case, right-click the label
<em>Name:</em>. Select <em>Copy Name</em>, to copy the internal name of this field.</p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_09.png title="Copy the field name"><img id="Copy the field name" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_09.png alt="Copy the field name" title="Copy the field name"></a><figcaption class=figure-caption>Copy the field name</figcaption></p></p><p>Now, you can add this field as a new field to your window by pasting the
name. All field settings are taken over from the internal field from the module <code>LocalImage</code>.</p><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.script</p></div><div class=card-body><pre tabindex=0><code class=language-Stan data-lang=Stan>Window {
    TabView {
        TabViewItem Main {
            Vertical {
                Field LocalImage.name {}
                Horizontal {
                    Viewer View2D.self {
                        type = SoRenderArea
                        pw = 400
                        ph = 400
                    }
                    Viewer SoExaminerViewer.self {
                        type = SoExaminerViewer
                        pw = 400
                        ph = 400
                    }
                }
            }
        }
        
        TabViewItem Settings {
        }
    }
}
</code></pre></div></div><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/AddNameField.png title="Add name field"><img id="Add name field" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/AddNameField.png alt="Add name field" title="Add name field"></a><figcaption class=figure-caption>Add name field</figcaption></p></p><h3 id=add-buttons-to-your-panel>Add buttons to your panel</h3><p>As a next step, we like to add a <em>Browse...</em>-Button, like in the module
<code>LocalImage</code>, and also a button to create the CSOs.</p><p>To create the <em>Browse...</em>-Button:</p><ol><li>Create a button containing the command <em>fileDialog</em>.</li><li>Right-click
<img width=22px src=https://mevislab.github.io/examples/images/rmb.svg alt="Right Mouse Button">
the command to create the respective function in the Python file.</li><li>Edit the function in the Python file, to enable the file dialog (similar function as in <em>LocalImage.py</em>).</li></ol><p>To create the Iso Generator Button:</p><p>We like to copy the field of the Update-Button from the internal module
<code>IsoCSOGenerator</code>, but not its layout so:</p><ol><li>Create a new Field in the interface, called <em>IsoGenerator</em>, which contains the internal field <em>Update</em> from the module <code>IsoCSOGenerator</code>.</li><li>Create a new Button in your Window which uses the field <em>IsoGenerator</em>.</li></ol><p>After these steps, you can use the Iso Generator button to create CSOs.</p><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.script</p></div><div class=card-body><pre tabindex=0><code class=language-Stan data-lang=Stan>Interface {
    Inputs {}
    Outputs {}
    Parameters {
        Field IsoGenerator {
            internalName = CSOIsoGenerator.apply
        }
    }
}

Commands {
    source = $(LOCAL)/IsoCSOs.py
}

Window {
    TabView {
        TabViewItem Main {
            Vertical {
                Horizontal {
                    Field LocalImage.name {}
                    Button {
                        title = &#34;Browse...&#34;
                        command = fileDialog
                    }
                    Button IsoGenerator {
                        title = &#34;Iso Generator&#34;
                    }
                }
                Horizontal {
                    Viewer View2D.self {
                        type = SoRenderArea
                        pw = 400
                        ph = 400
                    }
                    Viewer SoExaminerViewer.self {
                        type = SoExaminerViewer
                        pw = 400
                        ph = 400
                    }
                }
            }
        }
        
        TabViewItem Settings {
        }
    }
}
</code></pre></div></div><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.py</p></div><div class=card-body><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#f92672>from</span> mevis <span style=color:#f92672>import</span> <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fileDialog</span>():
</span></span><span style=display:flex><span>    exp <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span>expandFilename(ctx<span style=color:#f92672>.</span>field(<span style=color:#e6db74>&#34;LocalImage.name&#34;</span>)<span style=color:#f92672>.</span>stringValue())
</span></span><span style=display:flex><span>    filename <span style=color:#f92672>=</span> MLABFileDialog<span style=color:#f92672>.</span>getOpenFileName(exp, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;Open file&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> filename:
</span></span><span style=display:flex><span>        ctx<span style=color:#f92672>.</span>field(<span style=color:#e6db74>&#34;LocalImage.name&#34;</span>)<span style=color:#f92672>.</span>value <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span>unexpandFilename(filename)
</span></span></code></pre></div></div></div><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_14.png title="Automatically generate CSOs based on Iso value"><img id="Automatically generate CSOs based on Iso value" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_14.png alt="Automatically generate CSOs based on Iso value" title="Automatically generate CSOs based on Iso value"></a><figcaption class=figure-caption>Automatically generate CSOs based on Iso value</figcaption></p></p><h3 id=colorizing-csos>Colorizing CSOs</h3><p>We like to colorize the CSO we hover over with our
mouse in the 2D viewer. Additionally, when clicking a CSO with the left mouse key
<img width=22px src=https://mevislab.github.io/examples/images/lmb.svg alt="Left Mouse Button">
, this CSO shall be
colorized in the 3D viewer. This functionality can be implemented via Python
scripting (even though MeVisLab has a build-in function to do that). We
can do this in the following way:</p><ol><li><p>Enable the View <em>Scripting Assistant</em>, which translates actions into Python code.</p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_15.png title="Scripting Assistant"><img id="Scripting Assistant" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_15.png alt="Scripting Assistant" title="Scripting Assistant"></a><figcaption class=figure-caption>Scripting Assistant</figcaption></p></p></li><li><p>Enable a functionality which allows us to notice the id of the CSO we are currently hovering over with our mouse. For this open the internal network of our macro module. We will use the module <code>SoView2DCSOExtensibleEditor</code>. Open its panel and select the tab <em>Advanced</em>. You can check a box to enable <em>Update CSO id under mouse</em>. If you now hover over a CSO, you can see its id in the panel. We can save the internal network to save this functionality, but we can also solve our problem via scripting. The Scripting Assistant translated our action into code, which we can use.</p><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_16.png title="Enabling CSO id identification"><img id="Enabling CSO id identification" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_16.png alt="Enabling CSO id identification" title="Enabling CSO id identification"></a><figcaption class=figure-caption>Enabling CSO id identification</figcaption></p></p><p>We like to activate this functionality when opening the panel of our macro module <code>IsoCSOs</code>. Thus, we add a starting command to the control Window. We can call this command for example <em>enableFunctionalities</em>.</p><p>In the <em>.script</em> file:</p></li></ol><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.script</p></div><div class=card-body><pre tabindex=0><code class=language-Stan data-lang=Stan>Window {
    windowActivatedCommand = enableFunctionalities
    TabView {
        TabViewItem Main {
            ...
        }
    }
}
</code></pre></div></div><p>In the Python file, we define the function <em>enableFunctionalities</em>. We see our action as Python code in the <em>Scripting Assistant</em>. Just copy the code into our Python function.</p><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.py</p></div><div class=card-body><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>enableFunctionalities</span>():
</span></span><span style=display:flex><span>    ctx<span style=color:#f92672>.</span>field(<span style=color:#e6db74>&#34;SoView2DCSOExtensibleEditor.updateCSOIdUnderMouseCursor&#34;</span>)<span style=color:#f92672>.</span>value <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span></code></pre></div></div></div><ol start=3><li>Implement a field listener. This field listener will detect when you hover over a CSO and the CSO id changes. Triggered by a CSO id change, a colorization function will be executed and colorize the selected CSO.</li></ol><p>In the <em>.script</em> file:</p><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.script</p></div><div class=card-body><pre tabindex=0><code class=language-Stan data-lang=Stan>Commands {
    source = $(LOCAL)/IsoCSOs.py
    FieldListener SoView2DCSOExtensibleEditor.csoIdUnderMouseCursor {
        command = colorizeCSO
    }
}
</code></pre></div></div><p>In the Python file:</p><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.py</p></div><div class=card-body><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python><span style=display:flex><span><span style=color:#75715e># global variables</span>
</span></span><span style=display:flex><span>listCSOs <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>idxCSO <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>colorizeCSO</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> ctx<span style=color:#f92672>.</span>field(<span style=color:#e6db74>&#34;CSOManager.numCSOs&#34;</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>global</span> listCSOs
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>global</span> idxCSO
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> listCSOs <span style=color:#f92672>==</span> []:
</span></span><span style=display:flex><span>            listCSOs <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span>field(<span style=color:#e6db74>&#34;CSOManager.outCSOList&#34;</span>)<span style=color:#f92672>.</span>object()
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># COLORIZATION OF CSO</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Changing back color of previously selected CSO to default value</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> idxCSO <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>            oldCSO <span style=color:#f92672>=</span> listCSOs<span style=color:#f92672>.</span>getCSOAt(idxCSO)
</span></span><span style=display:flex><span>            oldCSO<span style=color:#f92672>.</span>setPathPointColor((<span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>)) <span style=color:#75715e># Color change of CSO</span>
</span></span><span style=display:flex><span>            oldCSO<span style=color:#f92672>.</span>setPathPointWidth(<span style=color:#ae81ff>1</span>)               <span style=color:#75715e># Line width change</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># Changing color and width of selected CSO</span>
</span></span><span style=display:flex><span>        idxCSO <span style=color:#f92672>=</span> ctx<span style=color:#f92672>.</span>field(<span style=color:#e6db74>&#34;SoView2DCSOExtensibleEditor.csoIdUnderMouseCursor&#34;</span>)<span style=color:#f92672>.</span>value <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e># -1 because CSOs are indexed starting at 1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> idxCSO <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>            currentCSO <span style=color:#f92672>=</span> listCSOs<span style=color:#f92672>.</span>getCSOAt(idxCSO)
</span></span><span style=display:flex><span>            currentCSO<span style=color:#f92672>.</span>setPathPointColor((<span style=color:#ae81ff>1.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>))
</span></span><span style=display:flex><span>            currentCSO<span style=color:#f92672>.</span>setPathPointWidth(<span style=color:#ae81ff>5</span>)
</span></span></code></pre></div></div></div><p>Reload your module (
<kbd>F5
</kbd>) and open the panel. After generating CSOs, the CSO under your mouse is marked. Clicking this CSO
<img width=22px src=https://mevislab.github.io/examples/images/lmb.svg alt="Left Mouse Button">
enables the marking in the 3D viewer. If you like, you can add some settings to your <em>Settings</em>
page. For example</p><div class=card style=margin-bottom:2rem><div class="card-header d-flex justify-content-between"><p class="card-title m-0">IsoCSOs.script</p></div><div class=card-body><pre tabindex=0><code class=language-Stan data-lang=Stan>TabViewItem Settings {
    Field CSOIsoGenerator.isoValue {}
    Field SoCSOVisualizationSettings.ghostingDepthInVoxel {}
}
</code></pre></div></div><p><p class=page-image><a data-modal=bs-lightbox href=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_22.png title="Colored selection"><img id="Colored selection" class="img-fluid rounded" src=https://mevislab.github.io/examples/images/tutorials/basicmechanics/GUI_Exp_22.png alt="Colored selection" title="Colored selection"></a><figcaption class=figure-caption>Colored selection</figcaption></p></p><h2 id=summary>Summary</h2><ul><li>The control <em>Tabview</em> creates tabs in panels.</li><li>The control <em>Viewer</em> allows to add viewers to your panel.</li><li>The control <em>Button</em> creates a button executing a Python function when pressed.</li><li>The tag <em>WindowActivationCommand</em> of the control Window triggers Python functions executed when opening the panel.</li><li>Field listeners can be used to activate Python functions triggered by a change of defined parameter fields.</li><li>Use the view <em>Scripting Assistant</em> can be used to translate actions into Python code.</li></ul><div class="alert alert-secondary d-flex align-items-center" role=alert><div><img width=36px src=https://mevislab.github.io/examples/favicon.ico>&nbsp;&nbsp;&nbsp;Download .mlab file <a href=https://mevislab.github.io/examples/examples/basic_mechanisms/macro_modules_and_module_interaction/example2/ target=_blank>here</a>.</div></div></div></div></div></div></div><script>const body_element=document.querySelector("html body"),modal_div=document.createElement("div");let modal_window=document.body.appendChild(modal_div),modal_html='<div class="modal fade" id="lightboxModalFullscreen" tabindex="-1" aria-labelledby="lightboxModalFullscreenLabel" aria-hidden="true"><div class="modal-dialog modal-fullscreen" data-bs-dismiss="modal" aria-label="Close"><div class="modal-content border-0"><div class="modal-body d-flex align-self-center align-items-center justify-content-center"><div class="modal-custom"><img src="" id="LightboxCanvas" class="img-fluid" data-bs-dismiss="modal" aria-label="Close" /><figcaption id="LightboxCaption" class="figure-caption"></figcaption></div></div></div></div></div>';modal_window.innerHTML=modal_html,Array.from(document.querySelectorAll('[data-modal*="bs-lightbox"]')).forEach(e=>{e.setAttribute("data-bs-toggle","modal"),e.setAttribute("data-bs-target","#lightboxModalFullscreen"),e.addEventListener("click",t=>{const n=e.getAttribute("href"),s=e.getAttribute("title");document.getElementById("LightboxCanvas").src=n,document.getElementById("LightboxCaption").innerHTML=s,t.preventDefault(),console.log(n)})}),hljs.addPlugin(new CopyButtonPlugin({hook:(e)=>e}))</script></div><footer class="footer fixed-bottom mt-auto py-3"><div class="row footer-text"><div class="col-12 col-md text-center text-md-left text-white">&copy; Copyright 2022 <a href=https://www.mevis.de target=_blank>MeVis Medical Solutions AG</a> | <a href=https://www.mevislab.de/imprint target=_blank>Imprint</a> | <a href=https://www.mevislab.de target=_blank>https://www.mevislab.de</a></div></div><script src=https://mevislab.github.io/examples/js/bundle.min.js defer></script></footer></body></html>